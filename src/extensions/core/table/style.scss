
/*      mixin
/*-------------------------------------------*/
// 横スクロール
@mixin scrollable-table {
	display: block;
	overflow-x: auto;
	-webkit-overflow-scrolling: touch;

	table {
		table-layout: auto;

		th, td {
			white-space: nowrap;
			overflow: hidden;
			text-overflow: ellipsis;
		}
	}

}

@mixin scrollable-table-scroll-hint {
	display: block;
	text-align: right;
	font-size: .85rem;
	&:has(i:last-of-type ) {
		margin-right: 3px;
	}
	i {
		margin: 0;
		&:first-of-type {
			animation: shake-left 1.5s ease-in-out infinite;
		}
		&:last-of-type {
			animation: shake-right 1.5s ease-in-out infinite;
		}
 	}
  	/* 横揺れアニメーションの定義 */
	@keyframes shake-left {
		0% { transform: translateX(0); }
		50% { transform: translateX(-3px); }
		100% { transform: translateX(0); }
	}
	@keyframes shake-right {
		0% { transform: translateX(0); }
		50% { transform: translateX(3px); }
		100% { transform: translateX(0); }
	}
}

@mixin scrollable-table-editor {
	overflow-x: auto;
	-webkit-overflow-scrolling: touch;

	table {
		table-layout: auto;

		th, td {
			> div[role="textbox"] {
				white-space: nowrap !important;
				overflow: hidden;
				text-overflow: ellipsis;
			}
		}
	}
}


/*      フロントエンド
/*-------------------------------------------*/
.wp-block-table {
	thead th, tfoot td {
		font-weight: bold;
	}

	&.is-style-vk-table {     
		&-border-top-bottom,
		&-border,
		&-border-stripes {
			// theme.json のあるファイルでテーブルの線の色指定がない場合のみ適用
			table:where(:not(.has-border-color)) {
				:where(th, td) {
					border: 1px solid var(--vk-color-border-hr);
				}
			}
		}

		&-border-top-bottom {
			table,
			th,
			td {
				border-left: none;
				border-right: none;
			}
		}

		&-border {
			// theme.json のあるファイルでテーブルの線の色指定がない場合のみ適用
			table:where(:not(.has-border-color)) {
				th, td {
					border: 1px solid var(--vk-color-border-hr);
				}
			}
		}

		&-border-stripes {
			tbody tr:nth-child(2n+1) {
				background-color: #f0f0f0;
			}
			// theme.json のあるファイルでテーブルの線の色指定がない場合のみ適用
			table:where(:not(.has-border-color)) {
				th, td {
					border: 1px solid var(--vk-color-border-hr);
				}
			}
		}
	}

	&.is-style-vk-table-scrollable {

		&[data-scroll-breakpoint="table-scrollable-mobile"] {
			@media (max-width: 575.98px) {
				@include scrollable-table;
			}
		}

		&[data-scroll-breakpoint="table-scrollable-tablet"] {
			@media (max-width: 991.98px) {
				@include scrollable-table;
			}
		}

		&[data-scroll-breakpoint="table-scrollable-pc"] {
			@include scrollable-table;
		}
	}
}

.vk-scroll-hint {
	display: none;

	&[data-scroll-breakpoint="table-scrollable-mobile"] {
		@media (max-width: 575.98px) {
			@include scrollable-table-scroll-hint;
		}
	}

	&[data-scroll-breakpoint="table-scrollable-tablet"] {
		@media (max-width: 991.98px) {
			@include scrollable-table-scroll-hint;
		}
	}

	&[data-scroll-breakpoint="table-scrollable-pc"] {
		@include scrollable-table-scroll-hint;
	}
}

/*      編集画面
/*-------------------------------------------*/
.editor-styles-wrapper {
	.wp-block-table {
		&.is-style-regular { //デフォルトのボーダーカラー
			th, td {
				border-color: var(--vk-color-border-hr);
			}
		}
		&.is-style-vk-table-scrollable {
			@include scrollable-table-editor;
		}
	}
	.vk-scroll-hint {
		@include scrollable-table-scroll-hint;
	}	
}
