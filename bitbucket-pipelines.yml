# This is a sample build configuration for Other.
# Check our guides at https://confluence.atlassian.com/x/5Q4SMw for more examples.
# Only use spaces to indent your .yml configuration.
# -----
# You can specify a custom docker image from Docker Hub as your build environment.
image: atlassian/default-image:2

pipelines:
  default:
    - step:
        script:
          - echo "Everything is awesome!"
  branches:
    master:
      - step:
          name: Deploy
          script: 
            - git config --global user.email "info@vektor-inc.co.jp"
            - git config --global user.name "bitbucket-piplines-vk-blocks-pro"
            - git clone git@github.com:vektor-inc/vk-blocks.git
            - rsync --exclude '.git/' --exclude '.gitignore' --exclude '.circleci/' --exclude 'tests/' --exclude 'tests/' --exclude '.phpcs.xml.dist' --exclude 'bitbucket-pipelines.yml' --exclude 'gulpfile.js' --exclude 'package-lock.json' --exclude 'phpunit.xml' --exclude 'phpunit.xml.dist' --exclude 'vk-blocks/' -avc ./* ./vk-blocks
            - cd ./vk-blocks/
            - git checkout -b add/example
            - git add .
            - git status
            - git commit -m"Update from vk-blocks-pro"
            - git push origin add/example